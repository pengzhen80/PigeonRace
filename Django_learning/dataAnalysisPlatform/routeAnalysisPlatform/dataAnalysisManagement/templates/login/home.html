{% load static %}
<head>
    <meta charset="UTF-8">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <!-- <link rel="stylesheet" href="{% static 'css/table.css' %}" /> -->
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet">

    <title>Space Dynamic - SEO HTML5 Template</title> -->

    <!-- Bootstrap core CSS -->
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">

    <!-- Additional CSS Files -->
    <link rel="stylesheet" href="{% static 'css/fontawesome.css' %}">
    <link rel="stylesheet" href="{% static 'css/templatemo-space-dynamic.css' %}">
    <!-- <link rel="stylesheet" href="assets/css/animated.css">
    <link rel="stylesheet" href="assets/css/owl.css"> -->
    <style>
        .myDiv_table {
            /* border: 1px outset black; */
            /* background-color: lightblue;     */
            text-align: center;
            width:100%;
            height: 400px;
            top : 100px;
            position: relative;
        }
    </style>
</head>
<header class="header-area header-sticky wow slideInDown animated background-header" data-wow-duration="0.75s" data-wow-delay="0s" style="visibility: visible;-webkit-animation-duration: 0.75s; -moz-animation-duration: 0.75s; animation-duration: 0.75s;-webkit-animation-delay: 0s; -moz-animation-delay: 0s; animation-delay: 0s;">
    <div class="container">
      <div class="row">
        <div class="col-12">
          <nav class="main-nav">
            <!-- ***** Logo Start ***** -->
            <a  class="logo">
              <h4>Sky<span>Leader</span></h4>
            </a>
            <!-- ***** Logo End ***** -->
            <!-- ***** Menu Start ***** -->
            <ul class="nav">
              <li class="scroll-to-section"><a href="#home" class="active">Home</a></li>
              <li class="scroll-to-section"><a href="login/activity" class="">Activity</a></li>
              <li class="scroll-to-section"><a href="#pigeon" class="">Pigeon</a></li>
            </ul>        
            <!-- <a class="menu-trigger">
                <span>Menu</span>
            </a> -->
            <!-- ***** Menu End ***** -->
          </nav>
        </div>
      </div>
    </div>
</header>
<body>
    <div class="container myDiv_table">
    <div class="row">
        <div id = 'div_rankStrightSpeed' class="col-sm">
        <table id="table_rankStrightSpeed" class="table table-striped table-bordered table-hover"><h4>平均直線分速排名</h4>
            <!-- <caption><h4>平均直線分速排名</h4></caption>     -->
            <thead class="thead-dark">
                    <tr>
                        <th>公環號碼</th>
                        <th>總實際距離(m)</th>
                        <th>平均實際分速(m/min)</th>
                        <th>總直線距離(m)</th>
                        <th>平均直線分速(m/min)</th>
                        <th>總路徑效率</th>
                    </tr>
                </thead>
                <tbody id="table_rankStrightSpeed_body">
                </tbody>
        </table>
        </div>
    <!-- <br></br>
    <br></br>
    <br></br> -->
    <div id = 'div_rankRouteEfficiency' class="col-sm">
        <table id="table_rankRouteEfficiency" class="table table-dark table-striped table-bordered table-hover"><h4>總路徑效率排名</h4>
            <thead>
                <tr>
                    <th>公環號碼</th>
                    <th>總實際距離(m)</th>
                    <th>平均實際分速(m/min)</th>
                    <th>總直線距離(m)</th>
                    <th>平均直線分速(m/min)</th>
                    <th>總路徑效率</th>
                </tr>
            </thead>
            <tbody id="table_rankRouteEfficiency_body">
            </tbody>
    </table>
    </div>
    </div>
    </div>
    <script>
        let rankStraightSpeed = '{{ rankStraightSpeed|safe }}';
        // console.log(rankStraightSpeed,typeof(rankStraightSpeed),rankStraightSpeed.length);
        let normalized_rankStraightSpeed = JSON.parse(rankStraightSpeed)
        let rankRouteEfficiency = '{{ rankRouteEfficiency|safe }}';
        let normalized_rankRouteEfficiency = JSON.parse(rankRouteEfficiency)
        // console.log(rankRouteEfficiency);

        rankStraightSpeed_showInTable(normalized_rankStraightSpeed);
        function rankStraightSpeed_showInTable(rankDataList) {
            let table_activityPage_activity_body = document.getElementById('table_rankStrightSpeed_body');
            for (var i = 0; i < rankDataList.length; i++) {
                func_table_activity_addData(rankDataList[i]['pigeonNumber'], rankDataList[i]['totalRealDistance'], rankDataList[i]['averageRealSpeed'],rankDataList[i]['totalStraightDistance'],rankDataList[i]['averageStraightSpeed'],rankDataList[i]['totalRouteEfficiency']);
            }
            function func_table_activity_addData(pigeonNumber, totalRealDistance, averageRealSpeed,totalStraightDistance,averageStraightSpeed,totalRouteEfficiency) {
                var row = document.createElement('tr');
                // var row_data_0 = document.createElement("INPUT");
                // row_data_0.setAttribute("type", "checkbox");
                // row_data_0.style.position = 'absolute';
                // row_data_0.style.top = '30%';
                var row_data_1 = document.createElement('td');
                row_data_1.innerHTML = pigeonNumber;
                // row_data_1.style.textAlign = "center";
                var row_data_2 = document.createElement('td');
                row_data_2.innerHTML = totalRealDistance.toFixed(3);
                // row_data_2.style.textAlign = "center";
                var row_data_3 = document.createElement('td');
                row_data_3.innerHTML = averageRealSpeed.toFixed(3);
                // row_data_3.style.textAlign = "center";
                var row_data_4 = document.createElement('td');
                row_data_4.innerHTML = totalStraightDistance.toFixed(3);
                var row_data_5 = document.createElement('td');
                row_data_5.innerHTML = averageStraightSpeed.toFixed(3);
                var row_data_6 = document.createElement('td');
                row_data_6.innerHTML = totalRouteEfficiency.toFixed(3);


                // row.appendChild(row_data_0);
                row.appendChild(row_data_1);
                row.appendChild(row_data_2);
                row.appendChild(row_data_3);
                row.appendChild(row_data_4);
                row.appendChild(row_data_5);
                row.appendChild(row_data_6);

                function func_cb_row()
                {
                    console.log('click');
                    var pigeonNumber = row_data_1.innerHTML;
                    console.log(pigeonNumber); 
                    window.open('login/pigeon/'+pigeonNumber);
                }
                row.addEventListener('click',func_cb_row);
                table_activityPage_activity_body.appendChild(row);
            }
        }

        rankRouteEfficiency_showInTable(normalized_rankRouteEfficiency);
        function rankRouteEfficiency_showInTable(rankDataList) {
            let table_activityPage_activity_body = document.getElementById('table_rankRouteEfficiency_body');
            for (var i = 0; i < rankDataList.length; i++) {
                func_table_activity_addData(rankDataList[i]['pigeonNumber'], rankDataList[i]['totalRealDistance'], rankDataList[i]['averageRealSpeed'],rankDataList[i]['totalStraightDistance'],rankDataList[i]['averageStraightSpeed'],rankDataList[i]['totalRouteEfficiency']);
            }
            function func_table_activity_addData(pigeonNumber, totalRealDistance, averageRealSpeed,totalStraightDistance,averageStraightSpeed,totalRouteEfficiency) {
                var row = document.createElement('tr');
                // var row_data_0 = document.createElement("INPUT");
                // row_data_0.setAttribute("type", "checkbox");
                // row_data_0.style.position = 'absolute';
                // row_data_0.style.top = '30%';
                var row_data_1 = document.createElement('td');
                row_data_1.innerHTML = pigeonNumber;
                // row_data_1.style.textAlign = "center";
                var row_data_2 = document.createElement('td');
                row_data_2.innerHTML = totalRealDistance.toFixed(3);
                // row_data_2.style.textAlign = "center";
                var row_data_3 = document.createElement('td');
                row_data_3.innerHTML = averageRealSpeed.toFixed(3);
                // row_data_3.style.textAlign = "center";
                var row_data_4 = document.createElement('td');
                row_data_4.innerHTML = totalStraightDistance.toFixed(3);
                var row_data_5 = document.createElement('td');
                row_data_5.innerHTML = averageStraightSpeed.toFixed(3);
                var row_data_6 = document.createElement('td');
                row_data_6.innerHTML = totalRouteEfficiency.toFixed(3);


                // row.appendChild(row_data_0);
                row.appendChild(row_data_1);
                row.appendChild(row_data_2);
                row.appendChild(row_data_3);
                row.appendChild(row_data_4);
                row.appendChild(row_data_5);
                row.appendChild(row_data_6);
                table_activityPage_activity_body.appendChild(row);
            }
        }

    </script>
</body>