<!DOCTYPE html>
<html>

<head>
  <title>路徑分析器</title>
</head>

<body>
  <script>
    class UI_allUiElementsManagement {
      constructor() {
        // this.buttons = [];
      }
      //id: string
      //style:{'background-color','opacity','position','bottom','left','right','top','width','height','border-radius','color','text',}
      //text:string ,callback: function
      Add_button(id, style, text) {
        if (document.getElementById(id)) {
          console.log('add button error', id, 'already exist');
        }
        console.log('add button');
        var tmp_button = document.createElement('button');
        tmp_button.setAttribute('id', id);
        // tmp_button.setAttribute('style',style);

        tmp_button.style.bottom = style['bottom'];
        tmp_button.style.left = style['left'];
        tmp_button.style.position = style['position'];
        tmp_button.style['text-align'] = style['text-align'];
        tmp_button.style.height = style['height'];
        tmp_button.style['border-radius'] = style['border-radius'];
        tmp_button.style['width'] = style['width'];
        // canvas.style.border   = "1px solid";
        tmp_button.style.backgroundColor = style['backgroundColor'];
        // tmp_button.style.opacity = "0.5";
        tmp_button.style.color = style['color'];
        // canvas.style.color = 'black';

        tmp_button.innerHTML = text;
        // console.log(tmp_button.style);
        // console.log(tmp_button.getAttribute('style'));

        // this.buttons.push(tmp_button);
        document.body.appendChild(tmp_button);
        return tmp_button;
      }
      Add_CallBack(id, callback) {
        var tmp_button = document.getElementById(id);
        if (tmp_button) {
          tmp_button.addEventListener('click', callback);
        }
        else {
          console.log('find button error', id, 'not exist');
        }
      }

      AddElement_Select(id, style, size, options = []) {
        var ele = document.createElement('select');
        ele.setAttribute('id', id);
        ele.setAttribute('size', size);

        ele.style.bottom = style['bottom'];
        ele.style.left = style['left'];
        ele.style.position = style['position'];
        ele.style.height = style['height'];
        ele.style['width'] = style['width'];

        if (options) {
          for (var i = 0; i < options.length; i++) {
            var opt = document.createElement('option');
            opt.value = options[i][0];
            opt.innerHTML = options[i][1];
            ele.appendChild(opt);
          }
        }

        document.body.appendChild(ele);
        return ele;
      }

      //text input
      AddElement_TextInput(id, style, text) {
        if (document.getElementById(id)) {
          console.log('add element error', id, 'already exist');
        }

        var ele = document.createElement('input');

        ele.style.bottom = style['bottom'];
        ele.style.left = style['left'];
        ele.style.position = style['position'];
        ele.style['text-align'] = style['text-align'];
        ele.style.height = style['height'];
        ele.style['border-radius'] = style['border-radius'];
        ele.style['width'] = style['width'];
        // canvas.style.border   = "1px solid";
        ele.style.backgroundColor = style['backgroundColor'];
        // tmp_button.style.opacity = "0.5";
        ele.style.color = style['color'];
        // canvas.style.color = 'black';

        // ele.innerHTML = text;
        ele.setAttribute('placeholder', text);

        // this.buttons.push(tmp_button);
        document.body.appendChild(ele);
        return ele;
      }

      AddElement_AddSubmit(id, style, text) {
        if (document.getElementById(id)) {
          console.log('add element error', id, 'already exist');
        }

        var ele = document.createElement('input');
        ele['type'] = 'submit';

        ele.style.bottom = style['bottom'];
        ele.style.left = style['left'];
        ele.style.position = style['position'];
        ele.style['text-align'] = style['text-align'];
        ele.style.height = style['height'];
        ele.style['border-radius'] = style['border-radius'];
        ele.style['width'] = style['width'];
        // canvas.style.border   = "1px solid";
        ele.style.backgroundColor = style['backgroundColor'];
        // tmp_button.style.opacity = "0.5";
        ele.style.color = style['color'];
        // canvas.style.color = 'black';

        ele.innerHTML = text;
        // console.log(ele.style);
        // console.log(ele.getAttribute('style'));

        // this.buttons.push(tmp_button);
        document.body.appendChild(ele);
        return ele;
      }

      CreateElement_Label(id, style, text = '') {
        if (document.getElementById(id)) {
          console.log('add button error', id, 'already exist');
        }
        console.log('add label');
        var tmp_label = document.createElement('label');
        tmp_label.setAttribute('id', id);
        // tmp_button.setAttribute('style',style);

        tmp_label.style.bottom = style['bottom'];
        tmp_label.style.left = style['left'];
        tmp_label.style.position = style['position'];
        tmp_label.style['text-align'] = style['text-align'];
        tmp_label.style.height = style['height'];
        tmp_label.style['border-radius'] = style['border-radius'];
        tmp_label.style['width'] = style['width'];
        tmp_label.style.backgroundColor = style['backgroundcolor'];
        // tmp_button.style.opacity = "0.5";
        tmp_label.style.color = style['color'];
        // canvas.style.color = 'black';

        tmp_label.innerHTML = text;
        // console.log(tmp_button.style);
        // console.log(tmp_button.getAttribute('style'));

        // this.buttons.push(tmp_button);
        // document.body.appendChild(tmp_label);
        return tmp_label;
      }

      AddElement_Label(id, style, text = '') {
        if (document.getElementById(id)) {
          console.log('add button error', id, 'already exist');
        }
        console.log('add label');
        var tmp_label = document.createElement('label');
        tmp_label.setAttribute('id', id);
        // tmp_button.setAttribute('style',style);

        tmp_label.style.bottom = style['bottom'];
        tmp_label.style.left = style['left'];
        tmp_label.style.position = style['position'];
        tmp_label.style['text-align'] = style['text-align'];
        tmp_label.style.height = style['height'];
        tmp_label.style['border-radius'] = style['border-radius'];
        tmp_label.style['width'] = style['width'];
        // canvas.style.border   = "1px solid";
        // console.log(style['backgroundcolor']);
        tmp_label.style.backgroundColor = style['backgroundcolor'];
        // tmp_button.style.opacity = "0.5";
        tmp_label.style.color = style['color'];
        // canvas.style.color = 'black';

        tmp_label.innerHTML = text;
        // console.log(tmp_button.style);
        // console.log(tmp_button.getAttribute('style'));

        // this.buttons.push(tmp_button);
        document.body.appendChild(tmp_label);
        return tmp_label;
      }

      CreateElement_Div(id, style) {
        if (document.getElementById(id)) {
          console.log('add div error', id, 'already exist');
        }
        console.log('add div');
        var tmp_div = document.createElement('div');
        tmp_div.setAttribute('id', id);
        // tmp_button.setAttribute('style',style);

        tmp_div.style.bottom = style['bottom'];
        tmp_div.style.left = style['left'];
        tmp_div.style.position = style['position'];
        tmp_div.style.height = style['height'];
        tmp_div.style['width'] = style['width'];
        tmp_div.style.backgroundColor = style['backgroundcolor'];
        // tmp_div.style.color = style['color'];

        return tmp_div;
      }

      AddElement_Div(id, style) {
        if (document.getElementById(id)) {
          console.log('add div error', id, 'already exist');
        }
        console.log('add div');
        var tmp_div = document.createElement('div');
        tmp_div.setAttribute('id', id);
        // tmp_button.setAttribute('style',style);

        tmp_div.style.bottom = style['bottom'];
        tmp_div.style.left = style['left'];
        tmp_div.style.position = style['position'];
        tmp_div.style.height = style['height'];
        tmp_div.style['width'] = style['width'];
        tmp_div.style.backgroundColor = style['backgroundcolor'];
        // tmp_div.style.color = style['color'];
        document.body.appendChild(tmp_div);

        return tmp_div;
      }
    };
    let ui_manager = new UI_allUiElementsManagement();
    let button_analyseSingleRoute = ui_manager.Add_button('button_analyseSingleRoute', { 'position': 'absolute', 'bottom': '80%', 'left': '40%', 'width': '20%' }, '單條路徑分析');
    let button_analyseSinglePigeon = ui_manager.Add_button('button_analyseSinglePigeon', { 'position': 'absolute', 'bottom': '60%', 'left': '40%', 'width': '20%' }, '路徑關聯分析-單只鴿子');
    let button_analyseMultiPigeon = ui_manager.Add_button('button_analyseMultiPigeon', { 'position': 'absolute', 'bottom': '40%', 'left': '40%', 'width': '20%' }, '路徑關聯分析-群體');
    function func_cb_button_analyseSingleRoute() {
      //send to servers
      function reqListener() {
        console.log(typeof (this.responseText), typeof (this.response));
        window.location.href = 'analysisModels/test';
      }
      var oReq = new XMLHttpRequest();
      oReq.addEventListener("load", reqListener);
      oReq.open("post", 'analysisModels' + '/');
      oReq.setRequestHeader("X-CSRFToken", '{{ csrf_token|safe }}');   
      oReq.send('singleRoute');
    }
    ui_manager.Add_CallBack('button_analyseSingleRoute', func_cb_button_analyseSingleRoute);

    // var button_link_db_test = document.getElementById('button_linkTestDB');
    // button_link_db_test.style.position = 'absolute';
    // button_link_db_test.style.bottom = '90%';
    // button_link_db_test.style.left = '1%';
    // button_link_db_test.style.height = '6%';
    // button_link_db_test.style.width = '15%';
    // button_link_db_test.innerHTML = '連接測試服務器';

  </script>
</body>

</html>